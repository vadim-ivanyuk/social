(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[0],{77:function(e,t,a){},78:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"toggleRegistrationForm",(function(){return S})),a.d(r,"toggleAuthenticationForm",(function(){return C})),a.d(r,"updateUser",(function(){return B})),a.d(r,"onLogOut",(function(){return R}));var n=a(2),s=a(1),c=a.n(s),i=a(10),o=a.n(i),l=a(45),u=a(20),d=a(64),j=a(65),m=new(a(67).a),h=a(9),b="TOGGLE_REGISTRATION_FORM",O="TOGGLE_AUTHENTICATION_FORM",p="UPDATE_USER",f="LOGOUT",g={user:null,user_id:m.get("user_id"),showRegistrationForm:!1,showAuthenticationForm:!1};var x=Object(u.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(h.a)(Object(h.a)({},e),{},{showRegistrationForm:t.payload});case O:return Object(h.a)(Object(h.a)({},e),{},{showAuthenticationForm:t.payload});case p:return Object(h.a)(Object(h.a)({},e),{},{user:{email:t.payload.email,password:t.payload.password,name:t.payload.name,avatar:t.payload.avatar}});case f:return g;default:return e}}}),v=Object(u.createStore)(x,Object(j.composeWithDevTools)(Object(u.applyMiddleware)(d.a,(function(){return function(e){return function(t){return t.type===f&&m.remove("user_id",{path:"/"}),e(t)}}})))),N=(a(77),a(78),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,122)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))}),y=a(15),w=(a(51),a(31)),_=a(32),A=a(35),F=a(33),S=function(e){return{type:b,payload:e}},C=function(e){return{type:O,payload:e}},B=function(e){return{type:p,payload:e}},R=function(){return{type:f}},E=function(e){return{auth:e.auth}},T=function(e){return{authActions:Object(u.bindActionCreators)(r,e)}},k=function(e){return Object(l.b)(E,T)(function(t){Object(A.a)(r,t);var a=Object(F.a)(r);function r(){return Object(w.a)(this,r),a.apply(this,arguments)}return Object(_.a)(r,[{key:"render",value:function(){return Object(n.jsx)(e,Object(h.a)({},this.props))}}]),r}(c.a.Component))},I=a(29),U=(a(62),a(119)),L=a(117),D=a(66),G=a.n(D),M=a.p+"static/media/social.11e8adbd.svg";y.a.initializeApp({apiKey:"AIzaSyBoHi_4IpiBXc4yRM9LWKIZxxRWlLt8A-4",authDomain:"iva-social.firebaseapp.com",databaseURL:"https://iva-social-default-rtdb.firebaseio.com",projectId:"iva-social",storageBucket:"iva-social.appspot.com",messagingSenderId:"986166095297",appId:"1:986166095297:web:ad78f6530e4461adbfd340",measurementId:"G-BT1V9GB04V"});var W=function(e){return function(t){Object(A.a)(r,t);var a=Object(F.a)(r);function r(){return Object(w.a)(this,r),a.apply(this,arguments)}return Object(_.a)(r,[{key:"render",value:function(){return Object(n.jsx)(e,Object(h.a)({},this.props))}}]),r}(c.a.Component)},z=y.a.storage().ref(),P=k(W((function(e){var t=e.auth.user,a=e.authActions,r=Object(s.useState)(null),c=Object(I.a)(r,2),i=c[0],o=c[1],l=Object(s.useState)(null),u=Object(I.a)(l,2),d=u[0],j=u[1];z.child(t.avatar).getDownloadURL().then((function(e){j(e)}));var m=Boolean(i);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"mr-3 cursor-pointer favorite",children:[Object(n.jsx)(G.a,{className:"favorite__icon mr-1"}),Object(n.jsx)("span",{style:{fontSize:"14px"},children:"\u041c\u043e\u0438 \u0436\u0435\u043b\u0430\u043d\u0438\u044f"})]}),Object(n.jsxs)("div",{id:"UserModal",className:"cursor-pointer pl-3 user-anchor",onClick:function(e){o(e.currentTarget)},children:[Object(n.jsx)("img",{src:d||M,className:"user-anchor__img",alt:""}),Object(n.jsx)("span",{className:"ml-2 user-anchor__name",children:t.name})]}),Object(n.jsxs)(U.a,{id:"UserModal",open:m,anchorEl:i,onClose:function(){o(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},className:"user-modal",children:[Object(n.jsxs)(L.a,{className:"user-modal__name",children:[t.name," ",Object(n.jsx)("span",{className:"user-modal__subname",children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})]}),Object(n.jsx)(L.a,{className:"user-modal__favorite",children:"\u041c\u043e\u0438 \u0436\u0435\u043b\u0430\u043d\u0438\u044f"}),Object(n.jsx)(L.a,{onClick:function(){return a.onLogOut()},className:"user-modal__log-out",children:"\u0412\u044b\u0439\u0442\u0438"})]})]})}))),H=a(120),J=a(118),K=a(16),V=(a(57),function(e){var t=e.user,a=e.onSubmit,r=e.handleChange,s=e.handleBlur,c=e.errors,i=e.firebaseError;return Object(n.jsx)("div",{className:"w-100 d-flex justify-content-center align-items-center",children:Object(n.jsxs)("form",{className:"col-11 registration-form",onSubmit:a,children:[Object(n.jsx)("h3",{className:"text-center mb-2 mt-2 form-title",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"email",children:"\u041b\u043e\u0433\u0438\u043d:"}),Object(n.jsx)("input",{type:"email",className:"form-control",name:"email",id:"email",value:t.email,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",onChange:r,onBlur:s}),Object(n.jsx)("p",{className:"text-danger error-text",children:c.email})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(n.jsx)("input",{type:"password",className:"form-control",name:"password",id:"password",value:t.password,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:r,onBlur:s}),Object(n.jsx)("p",{className:"text-danger error-text",children:c.password})]}),Object(n.jsx)("p",{className:"text-danger error-text",children:i}),Object(n.jsx)("div",{className:"form-group text-center",children:Object(n.jsx)("button",{type:"submit",className:"btn btn-secondary mt-2 pb-2 w-100",onSubmit:a,children:"\u0412\u043e\u0439\u0442\u0438"})})]})})}),X=y.a.database(),Z=W((function(e){var t=Object(s.useState)({email:"",password:""}),a=Object(I.a)(t,2),r=a[0],c=a[1],i=Object(s.useState)({}),o=Object(I.a)(i,2),l=o[0],u=o[1],d=Object(s.useState)(""),j=Object(I.a)(d,2),b=j[0],O=j[1],p=function(){var e={},t=r.email,a=r.password;return t.length<5&&(e.email="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d, \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 primer@gmail.com"),a.length<6&&(e.password="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c, \u043c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0437\u0430\u0447\u0435\u043d\u0438\u0439"),e},f=function(){var t=e.authActions;y.a.auth().signInWithEmailAndPassword(r.email,r.password).then((function(e){t.toggleAuthenticationForm(!1),X.ref("users").child(e.user.uid).on("value",(function(e){return t.updateUser(e.val())})),m.set("user_id",e.user.uid,{path:"/",maxAge:2592e3})})).catch((function(e){O(e.message)}))};return Object(n.jsx)(V,{user:r,onSubmit:function(e){e.preventDefault();var t=p();Object.keys(t).length>0?u(Object(h.a)({},t)):f()},handleChange:function(e){var t,a=e.target,n=a.name,s=a.value;c(Object(h.a)(Object(h.a)({},r),{},Object(K.a)({},n,s))),u(Object(h.a)(Object(h.a)({},l),{},(t={},Object(K.a)(t,n,null),Object(K.a)(t,"base",null),t)))},handleBlur:function(e){var t=e.target.name,a=p(),r=a[t];Object.keys(a).length>0&&u(Object(K.a)({},t,r))},errors:l,firebaseError:b})})),q=y.a.database(),Q=y.a.storage().ref(),Y=W(function(e){Object(A.a)(a,e);var t=Object(F.a)(a);function a(){var e;return Object(w.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState((function(e){var t;return{user:Object(h.a)(Object(h.a)({},e.user),{},Object(K.a)({},r,n)),errors:Object(h.a)(Object(h.a)({},e.errors),{},(t={},Object(K.a)(t,r,null),Object(K.a)(t,"base",null),t))}}))},e.handleChangeAvatar=function(t){var a=new FileReader,r=t.target.files[0].name;a.onload=function(t){Q.child(r).putString(t.target.result,"data_url",{contentType:"image/jpg"}).then((function(){e.setState((function(e){return{user:Object(h.a)(Object(h.a)({},e.user),{},{avatar:r})}}))})).catch((function(t){e.setState((function(e){return{errors:Object(h.a)(Object(h.a)({},e.errors),{},{avatar:t})}}))}))},a.readAsDataURL(t.target.files[0])},e.validateFields=function(){var t={},a=e.state.user,r=a.name,n=a.email,s=a.password,c=a.avatar;return r.length<2&&(t.name="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f, \u043c\u0438\u043d\u0438\u043c\u0443\u043c 5 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439"),n.length<5&&(t.email="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d, \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 primer@gmail.com"),s.length<6&&(t.password="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c, \u043c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0437\u0430\u0447\u0435\u043d\u0438\u0439"),null===c&&(t.avatar="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0432\u0430\u0442\u0430\u0440"),t},e.handleBlur=function(t){var a=t.target.name,r=e.validateFields(),n=r[a];Object.keys(r).length>0&&e.setState((function(e){return{errors:Object(h.a)(Object(h.a)({},e.errors),{},Object(K.a)({},a,n))}}))},e.onSubmit=function(t){t.preventDefault();var a=e.validateFields();Object.keys(a).length>0?e.setState({errors:Object(h.a)({},a)}):e.createAccount()},e.createAccount=function(){var t=e.state.user,a=e.props.authActions;y.a.auth().createUserWithEmailAndPassword(t.email,t.password).then((function(e){a.toggleRegistrationForm(!1),a.updateUser(t),console.log(t.avatar),q.ref("users").child(e.user.uid).set(Object(h.a)({},t)),m.set("user_id",e.user.uid,{path:"/",maxAge:2592e3})})).catch((function(t){e.setState({firebaseError:t.message})}))},e.state={user:{email:"",password:"",name:"",avatar:null},errors:{},firebaseError:""},e}return Object(_.a)(a,[{key:"render",value:function(){var e=this.state,t=e.user,a=e.errors,r=e.firebaseError;return Object(n.jsx)("div",{className:"w-100 d-flex justify-content-center align-items-center",children:Object(n.jsxs)("form",{className:"col-11 registration-form",onSubmit:this.onSubmit,children:[Object(n.jsx)("h3",{className:"text-center mb-2 mt-2 form-title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"name",children:"\u0418\u043c\u044f:"}),Object(n.jsx)("input",{type:"text",className:"form-control",name:"name",id:"name",value:t.name,placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0438\u043c\u044f",onChange:this.handleChange,onBlur:this.handleBlur}),Object(n.jsx)("p",{className:"text-danger error-text",children:a.name})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"email",children:"\u041b\u043e\u0433\u0438\u043d:"}),Object(n.jsx)("input",{type:"email",className:"form-control",name:"email",id:"email",value:t.email,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",onChange:this.handleChange,onBlur:this.handleBlur}),Object(n.jsx)("p",{className:"text-danger error-text",children:a.email})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(n.jsx)("input",{type:"password",className:"form-control",name:"password",id:"password",value:t.password,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:this.handleChange,onBlur:this.handleBlur}),Object(n.jsx)("p",{className:"text-danger error-text",children:a.password})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"avatar",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0432\u0430\u0442\u0430\u0440:"}),Object(n.jsx)("input",{type:"file",id:"avatar",onChange:this.handleChangeAvatar}),Object(n.jsx)("p",{className:"text-danger error-text",children:a.avatar})]}),Object(n.jsx)("p",{className:"text-danger error-text",children:r}),Object(n.jsx)("div",{className:"form-group text-center",children:Object(n.jsx)("button",{type:"submit",className:"btn btn-secondary mt-2 pb-2 w-100",onSubmit:this.onSubmit,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})})}}]),a}(c.a.Component)),$=function(e){var t=function(){var t=e.auth;e.authActions.toggleAuthenticationForm(!t.showAuthenticationForm)},a=function(){var t=e.auth;e.authActions.toggleRegistrationForm(!t.showRegistrationForm)},r=e.auth,s=e.authActions;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"col-sm-4",children:Object(n.jsx)("button",{type:"button",className:"btn btn-light custom-btn-light",onClick:t,children:"\u0412\u0445\u043e\u0434"})}),Object(n.jsx)(H.a,{isOpen:r.showAuthenticationForm,toggle:t,children:Object(n.jsx)(J.a,{children:Object(n.jsx)(Z,{auth:r,authActions:s})})}),Object(n.jsx)("div",{className:"col-sm-6",children:Object(n.jsx)("button",{type:"button",className:"btn btn-light custom-btn-light",onClick:a,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(n.jsx)(H.a,{isOpen:r.showRegistrationForm,toggle:a,children:Object(n.jsx)(J.a,{children:Object(n.jsx)(Y,{auth:r,authActions:s})})})]})},ee=a.p+"static/media/fon.6fc09ea9.jpg",te=k((function(e){var t=e.auth,a=e.authActions;return Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("div",{className:"header__img-bg",children:Object(n.jsx)("img",{src:ee,alt:"social",className:"w-100 h-100 cover"})}),Object(n.jsxs)("div",{className:"header__above-img",children:[Object(n.jsx)("div",{className:"container pt-3 mt-2 pb-4",children:Object(n.jsxs)("div",{className:"row justify-content-between",children:[Object(n.jsxs)("div",{className:"col-sm-3 d-flex justify-content-center",children:[Object(n.jsx)("img",{src:M,alt:"",className:"header__icon"}),Object(n.jsx)("h2",{className:"ml-1 social-title",children:"Social"})]}),Object(n.jsx)("div",{className:"col-sm-4 d-flex align-items-center justify-content-end",children:t.user?Object(n.jsx)(P,{}):Object(n.jsx)($,{auth:t,authActions:a})})]})}),Object(n.jsx)("div",{className:"container main",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-sm-6",children:[Object(n.jsxs)("div",{className:"col-sm-12 main__social-text pt-4",children:[Object(n.jsx)("span",{style:{fontWeight:"bold"},children:"Social"})," - \u044d\u0442\u043e \u0442\u043e\u0440\u0433\u043e\u0432\u0430\u044f \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430, \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0449\u0430\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u044c \u0438 \u043f\u0440\u043e\u0434\u0430\u0432\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b."]}),Object(n.jsx)("div",{className:"col-sm-11 main__social-text pt-3",children:"\u041c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c, \u0447\u0442\u043e\u0431\u044b \u0443 \u043d\u0430\u0441 \u0432\u044b \u0441\u043c\u043e\u0433\u043b\u0438 \u043d\u0430\u0439\u0442\u0438 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e \u0432\u0441\u0451."})]})})})]})]})})),ae=y.a.database(),re=k((function(e){var t=e.auth,a=e.authActions;return Object(s.useEffect)((function(){t.user_id&&ae.ref("users").child(t.user_id).on("value",(function(e){return a.updateUser(e.val())}))}),[t.user_id,a]),Object(n.jsx)(te,{})}));a(91);o.a.render(Object(n.jsx)(l.a,{store:v,children:Object(n.jsx)(re,{})}),document.getElementById("root")),N()}},[[92,1,2]]]);
//# sourceMappingURL=main.17e86cea.chunk.js.map